## CQU EDX 网课平台刷时长脚本 

1 分钟之内看完所有视频，本人亲身测试（网络安全期末：92/100）

## 大概思路： 

利用了 **videoJs 的记录视频时长机制的缺陷**

   ### 起源

听到网络安全老师昨晚说今天又要看视频，上节课老师还秀了秀每个人看的总时间。

索性研究了一下重大 EDX 是怎么统计视频时长的。

### 分析过程

首先，打开调试界面看出网页是用 Django 开发的（之前用它写过网站，有点熟悉），然后一顿操作之后，我得到以下结论（不一定对，因为是初步分析，还没有验证）

1. 网站视频播放器使用的是 videoJs 

2. 网页的 student_view 会记录有关于视频的操作行为，包括：load_video、play_video、pause_video、seek_video、stop_video。一共五种行为 

3. 每执行一种行为就会向 post 一个 json 数据

   其中:

   - 加载会 post 视频 id

   - 播放和暂停会 post 视频 id、当前时间、视频当前时间

   - 滑动和播放暂停不同的是它会多post一个滑动结束的时间

   - 滑动进度条时会发生三次操作，1暂停，2滑动，3播放，滑动会计算视频时间的begin_time和end_time

     > 注意：这个时候的当前时间是没有经过加减的。
>
     > 也就是说：**你想滑动刷时长不可能的**。
   
   - 结束会 post 视频 id 和当前时间。 

综上，我有了一个刷时长的思路。

### 我需要做的事： 

1. 我要搞清视频ID是怎么得来的，当然我也可以自己去console复制，但这满足不了强迫症的我 
2. 我要搞清json中当前时间和视频时间是怎么计算的，因为我要伪造它。    

### 实现

这个就去读代码吧，另外网页爬虫的思路就不多说了，这个说明的目的不在这个